<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/dashboard.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/code-review.css') }}">

    <title>GitMarvel - Make your code stand out!</title>
    <link rel="shortcut icon" href="{{ url_for('static', filename='images/logo-small.svg') }}"type="image/x-icon">
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</head>
<body>
    <nav class="navbar">
        <div class="logo-container">
            <img  class="logo" src="{{ url_for('static', filename='images/logo.svg') }}" alt="Logo" />
        </div>
        <ul class="nav-links">
            <!-- <li><a class="active" href="#home">Home</a></li>
            <li><a>About</a></li>
            <li><a>Team</a></li>
            <li><a>Terms & Co</a></li>
            <li><a>Contact</a></li> -->
        </ul>
        <!-- onclick="window.location.href='/logout'" -->
        <div>
            <div class="user-profile" onclick="logoutvisible()">
                <div class="avatar">
                    <img src="{{avatar_url}}" alt="">
                </div>
                <p>{{userName}}</p>
                <p style="font-size: 0.8rem; display: none; margin-right: 2rem;" onclick="window.location.href='/logout'" id="logout" >logout?</p>
            </div>
            
        </div>
    </nav>
    <main id="main">
        <div class="main-container">
            <p>Hey there, please enter your commit hash</p>
            <div class="select-container">
                <select id="repository-select" class="custom-select">
                    {% for repo in repos %}
                        <option value="{{ repo.full_name }}">{{ repo.name }}</option>
                    {% endfor %}
                </select>
                <button class="select-button">
                    <img src="{{ url_for('static', filename='icons/down-arrow.svg') }}"></img> <!-- Replace with your icon or image -->
                  </button>                
            </div>
            <div class="chat-input-container">
                <input type="text" class="chat-input" id="commit-input" placeholder="Enter commit hash">
                <button class="send-button" id="send-button">
                  <img class="send-icon" src="{{ url_for('static', filename='icons/send-icon.svg') }}"></img> <!-- You can replace this with an image or font icon -->
                </button>
            </div>
            
            <div id="html-output" class="html-output" style="display: none;">
                <p><center>Download Code Review</center></p>
            </div>
        </div>
        <footer class="dashboardfooter">
            GITMARVEL @2024
        </footer>
    </main>
    <div class="full" id="loader" style="display: none;">
        <div class="loader"></div>
    </div>
    <script src="{{ url_for('static', filename='js/code-review.js') }}"></script>
<script>
    function logoutvisible(){
        console.log("lols")
        var vis = document.getElementById("logout").style.display;
        console.log(vis)
        if(vis=="none"){
            document.getElementById("logout").style.display = "block";
        }
        else{
            document.getElementById("logout").style.display="none"
        }
    }

        // document.getElementById("code-review").addEventListener("click", function () {
        //     // Use fetch to call the API
        //     fetch('/code-review')
        //         .then(response => {
        //             if (!response.ok) {
        //                 throw new Error('Network response was not ok');
        //             }
        //             return response.blob(); // Get the file content as a Blob
        //         })
        //         .then(blob => {
        //             // Create a temporary link element to download the Blob
        //             const url = window.URL.createObjectURL(blob);
        //             const a = document.createElement('a');
        //             a.href = url;
        //             a.download = 'code-review.txt'; // File name for the downloaded file
        //             document.body.appendChild(a);
        //             a.click();
        //             a.remove();
        //             window.URL.revokeObjectURL(url); // Clean up the URL object
        //         })
        //         .catch(error => {
        //             console.error('There was an error:', error);
        //         });
        // });
</script>
</body>
</html>
